api.glovee.io {
    # Add a unique UUID per request to the response headers
    header X-Request-ID {http.request.uuid}

    # Swagger UI at /docs (strips the prefix so SwaggerUI serves from /)
    handle_path /docs* {
        reverse_proxy swaggerui:8080 {
            header_up X-Request-ID {http.request.uuid}
        }
    }

    # Forward all other requests to gateway (PostgREST reverse proxy)
    reverse_proxy gateway:8080 {
        header_up X-Request-ID {http.request.uuid}
    }

    log {
        output stdout
        format json
    }
}
