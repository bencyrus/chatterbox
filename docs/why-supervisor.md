why supervisor pattern and why not just to let things run syncronously

- At some point you have to decide for some part of a process to be syncronous but the question is which part. do you want to have all of that at the edge of your system? (clarify that with Daniel what he means). there is always a look or threads waiting. if you are waiting in the browswer with a loop or waiting in the browser async, it's still a loop, it's just an event loop.
- You can break a large transaction into smaller sub processes. Then you can run them at a good time for your system and you can prioritize different processes differently.
- It is true that the overall run time of the query at low usage time will basically be the same between breaking them down or running once but at load, next transactions will wait for one to finish so that waiting time is added and it can go up almost exponentially with requests waiting for previous ones to finihs to free up connections.
- Replayability.
- you can run things and store the results for that step and then the next (clarify with Daniel what he means by this). we have an endpoint that stripe sends events to. then we record the event and we enqueue a task to process it. and then when it gets processes, we record the result of that processing. then that might itself kick off subcediary tasks.
- Bein able to follow the logic of a system is more important than performance at the start. It's also the case that if you have many small tasks that get performed at a time, with a task system, it is naturally throttled by the speed with wicht the workers can run the tasks.
- when you have many small transactions rather than few big ones, you tend to get a more gradual defgredation of service rather tahn a catastrophic bug/shut down.
- Unsupervised large queries can cause issues. Soemtimes your customers push things to prod that causes thing to shut down.
- In bon noyman architecture, the data and program are the same thing. customers are affecting prod. prod changes over time even if you do nothing. and for some reason a large query can explode in complexity in the time it takes to complete. it is much easier to reason about small query and it is much easier to prevent them from locking everuting up. because you can make them to be just you read from a table, append something, and return a value. a complex large query can be broken down into a few of these. we had a batch job that killed the DB which was bad. it restarts and fixes itself but the complexity of that big query. we found ways of optimizing the query. it was out of memorty, the general thing to learn from it is not that one query is optimized and the other isn't. it is that you don't want to leave in your systme a cron or task that runs a query that is the kind of thing that can computationally explude. that is something that needs to be supervised. automated tasks need to be small.
- automated I mean the stuff that happens when you sleep. I mean whether an expert runs something or runs without an experts will. so even syncronous api calls follow this. There is a difference between things I run and watch the dashboard and be aware of what's going on rather than the things I let run when I sleep.
- to be clear, the supervisor does not need to be run through the worker. it can just be called somewhere else. for example stripe events for checkout session complete and custom subscription created come into different orders every time. they both need to be complete for us to then decide if failed or succeeded or what to do. if not customer checked out or not the scustomer subscription created then return null. then if both in, if failed, then do failed case and return. otherwise add the subscription recird and return. we run it at the end of each of those child processes. things might happen in different orders. what it's doing is like that it kind of has a state checker and then thiks what action do I want to take. it is the kind of thing that seeks towards a goal. the goal is that the customer wants a subscription and every time there is a little more of the job to do so it hands over to the system.
-
